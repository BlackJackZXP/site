<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title></title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">Black Jack</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Embedded <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cortex-M0</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../waiting/">中断</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../waiting/">Cortex-M3/4</a>
</li>

                        
                            
<li >
    <a href="../waiting/">STM32L0系列</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Software <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Coding Standard</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../about/">About</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../waiting/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../about/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/BlackJackZXP"><i class="fa fa-github"></i> GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#coding-standard">Coding Standard</a></li>
            <li class="second-level"><a href="#style-guide-of-c">Style Guide of C</a></li>
                
                <li class="third-level"><a href="#_1">变量命名</a></li>
                <li class="third-level"><a href="#_2">函数命名</a></li>
                <li class="third-level"><a href="#_3">宏命名</a></li>
                <li class="third-level"><a href="#_4">数据类型</a></li>
                <li class="third-level"><a href="#_5">编程风格</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="coding-standard">Coding Standard</h2>
<p>编程风格有很多，各公司也有各规则。当项目人数变多，代码庞大时，一个好的编程规则起到事半功倍的作用。阅读了很多代码，发现FreeRTOS的编程风格非常好。
我在工作中也使用，效果非常好。所以整理一下。</p>
<h3 id="style-guide-of-c">Style Guide of C</h3>
<p>这里对主要内容总结，也可以访问官方网站 <a href="https://www.freertos.org/FreeRTOS-Coding-Standard-and-Style-Guide.html">Coding Standard and Style Guide</a>.</p>
<h4 id="_1">变量命名</h4>
<p>不同的变量类型在变量前面加入如下前缀：</p>
<pre><code>* float --&gt; f
* double --&gt; d
* uint8_t(unsigned char) / int8_t(char) --&gt; uc / c
* uint16_t(unsigned short) / int16_t(short) --&gt; us / s
* uint32_t(unsigned long) / int32_t(long) --&gt; ul / l
* 非 stdint.h 定义的有 / 无符号类型变量 --&gt; ux / x
* 枚举前面使用e
* 指针前面使用p，例如：uint8_t *pucDemo
* char 类型的变量只能使用于ASCII字符，前缀c
* char * 类型的变量只使用于ASCII字符串，前缀pc
</code></pre>
<h4 id="_2">函数命名</h4>
<pre><code>* 文件内部函数(static)以prv为前缀 
* API函数以其返回值类型为前缀， 无返回值前缀为v
* 函数的名字以其所在的文件名开头。如vTaskDelete函数在Task.c文件中定义
</code></pre>
<h4 id="_3">宏命名</h4>
<pre><code>* 宏名以所在的文件的文件名的一部分作为前缀（开头），并且用小写。 比如: configUSE_PREEMPTION 在文件 FreeRTOSConifg.h 中 
* 除了前缀，其余部分用大写，下划线来分隔单词
</code></pre>
<h4 id="_4">数据类型</h4>
<p>只使用 stdint.h 定义的数据类型，但是下面两个条件除外：</p>
<pre><code>* char 只能保存ASCII字符
* char * 只能保持ASCII字符串
</code></pre>
<p>不能直接使用 int，要使用 short 和 long.</p>
<h4 id="_5">编程风格</h4>
<pre><code>* 缩进：缩进使用制表符，一个制表符等于4个空格
* 注释：注释单行不超过80列，特殊情况除外。不使用C++风格的双斜线（//）注释
* 布局：FreeRTOS的源代码被设计成尽可能的易于查看和阅读
</code></pre>
<p>下面的代码片中，第一部分展示文件布局，第二部分展示C代码设计格式：</p>
<pre><code>/* 首先在这里包含库文件... */    
#include &lt;stdlib.h&gt;

/* ...然后是FreeRTOS的头文件... */    
#include "FreeRTOS.h"

/* ...紧接着包含其它头文件. */    
#include "HardwareSpecifics.h"

/* 随后是#defines, 在合理的位置添加括号. */    
#define A_DEFINITION    ( 1 )

/*  
* 随后是Static (文件内部的)函数原型,   
* 如果注释有多行，参照本条注释风格---每一行都以’*’起始.  
*/    
static void prvAFunction( uint32_t ulParameter );

/* 文件作用域变量（本文件内部使用）紧随其后，要在函数体定义之前. */    
static BaseType_t xMyVariable.

/* 每一个函数的结束都有一行破折号，破折号与下面的第一个函数之间留一行空白。*/

/*-----------------------------------------------------------*/

void vAFunction( void )    
{    
    /* 函数体在此定义，注意要用大括号括住 */    
}    
/*-----------------------------------------------------------*/

static UBaseType_t prvNextFunction( void )    
{    
    /* 函数体在此定义. */    
}    
/*-----------------------------------------------------------*/

/* 
* 函数名字总是占一行，包括返回类型。 左括号之前没有空格左括号之后有一个空格， 
* 每个参数后面有一个空格参数的命名应该具有一定的描述性.  
*/    
void vAnExampleFunction( long lParameter1, unsigned short usParameter2 )   
{    
/* 变量声明没有缩进. */    
uint8_t ucByte;

    /* 代码要对齐.  大括号占独自一行. */    
    for( ucByte = 0U; ucByte &lt; fileBUFFER_LENGTH; ucByte++ )    
    {    
        /* 这里再次缩进. */    
    }    
}

/*  
* for、while、do、if结构具有相似的模式。这些关键字和左括号之间没有空格。 
* 左括号之后有一个空格，右括号前面也有一个空格，每个分号后面有一个空格。 
* 每个运算符的前后各一个空格。使用圆括号明确运算符的优先级。不允许有0 
* 以外的数字（魔鬼数）出现，必要时将这些数字换成能表示出数字含义的常量或 
* 宏定义。 
*/    
for( ucByte = 0U; ucByte &lt; fileBUFFER_LENGTH; ucByte++ )    
{    
}

while( ucByte &lt; fileBUFFER_LENGTH )    
{    
}

/*  
* 由于运算符优先级的复杂性，我们不能相信自己对运算符优先级时刻保持警惕 
* 并能正确的使用，因此对于多个表达式运算时，使用括号明确优先级顺序  
*/    
if( ( ucByte &lt; fileBUFFER_LENGTH ) &amp;&amp; ( ucByte != 0U ) )    
{    
    ulResult = ( ( ulValue1 + ulValue2 ) - ulValue3 ) * ulValue4;    
}

/* 条件表达式也要像其它代码那样对齐。 */    
#if( configUSE_TRACE_FACILITY == 1 )    
{    
    /* 向TCB增加一个用于跟踪的计数器. */    
    pxNewTCB-&gt;uxTCBNumber = uxTaskNumber;    
}    
#endif

/*方括号前后各留一个空格*/    
ucBuffer[ 0 ] = 0U;    
ucBuffer[ fileBUFFER_LENGTH - 1U ] = 0U;
</code></pre></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>
    <script src="../search/require.js"></script>
    <script src="../search/search.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
